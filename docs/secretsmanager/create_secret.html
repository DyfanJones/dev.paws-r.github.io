<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Creates a new secret — secretsmanager_create_secret • paws</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script href="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script href="../pkgdown.js"></script>




<meta property="og:title" content="Creates a new secret — secretsmanager_create_secret" />
<meta property="og:description" content="Creates a new secret. A secret in Secrets Manager consists of both the
protected secret data and the important information needed to manage the
secret.
Secrets Manager stores the encrypted secret data in one of a collection
of &quot;versions&quot; associated with the secret. Each version contains a copy
of the encrypted secret data. Each version is associated with one or
more &quot;staging labels&quot; that identify where the version is in the rotation
cycle. The SecretVersionsToStages field of the secret contains the
mapping of staging labels to the active versions of the secret. Versions
without a staging label are considered deprecated and not included in
the list.
You provide the secret data to be encrypted by putting text in either
the SecretString parameter or binary data in the SecretBinary
parameter, but not both. If you include SecretString or SecretBinary
then Secrets Manager also creates an initial secret version and
automatically attaches the staging label AWSCURRENT to the new
version.
If you call an operation to encrypt or decrypt the SecretString or
SecretBinary for a secret in the same account as the calling user
and that secret doesn't specify a AWS KMS encryption key, Secrets
Manager uses the account's default AWS managed customer master key
(CMK) with the alias aws/secretsmanager. If this key doesn't
already exist in your account then Secrets Manager creates it for
you automatically. All users and roles in the same AWS account
automatically have access to use the default CMK. Note that if an
Secrets Manager API call results in AWS creating the account's
AWS-managed CMK, it can result in a one-time significant delay in
returning the result.
If the secret resides in a different AWS account from the
credentials calling an API that requires encryption or decryption of
the secret value then you must create and use a custom AWS KMS CMK
because you can't access the default CMK for the account using
credentials from a different AWS account. Store the ARN of the CMK
in the secret when you create the secret or when you update it by
including it in the KMSKeyId. If you call an API that must encrypt
or decrypt SecretString or SecretBinary using credentials from a
different account then the AWS KMS key policy must grant
cross-account access to that other account's user or role for both
the kms:GenerateDataKey and kms:Decrypt operations.


Minimum permissions
To run this command, you must have the following permissions:
secretsmanager:CreateSecret
kms:GenerateDataKey - needed only if you use a customer-managed AWS
KMS key to encrypt the secret. You do not need this permission to
use the account default AWS managed CMK for Secrets Manager.
kms:Decrypt - needed only if you use a customer-managed AWS KMS key
to encrypt the secret. You do not need this permission to use the
account default AWS managed CMK for Secrets Manager.
secretsmanager:TagResource - needed only if you include the Tags
parameter.


Related operations
To delete a secret, use DeleteSecret.
To modify an existing secret, use UpdateSecret.
To create a new version of a secret, use PutSecretValue.
To retrieve the encrypted secure string and secure binary values,
use GetSecretValue.
To retrieve all other details for a secret, use DescribeSecret. This
does not include the encrypted secure string and secure binary
values.
To retrieve the list of secret versions associated with the current
secret, use DescribeSecret and examine the SecretVersionsToStages
response value.

" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="..">paws</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
</li>
<li>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/paws-r/paws/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Creates a new secret</h1>
    <small class="dont-index">Source: <a href='https://github.com/paws-r/paws/blob/master/R/secretsmanager_operations.R'><code>R/secretsmanager_operations.R</code></a></small>
    <div class="hidden name"><code>secretsmanager_create_secret.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a new secret. A secret in Secrets Manager consists of both the
protected secret data and the important information needed to manage the
secret.</p>
<p>Secrets Manager stores the encrypted secret data in one of a collection
of "versions" associated with the secret. Each version contains a copy
of the encrypted secret data. Each version is associated with one or
more "staging labels" that identify where the version is in the rotation
cycle. The <code>SecretVersionsToStages</code> field of the secret contains the
mapping of staging labels to the active versions of the secret. Versions
without a staging label are considered deprecated and not included in
the list.</p>
<p>You provide the secret data to be encrypted by putting text in either
the <code>SecretString</code> parameter or binary data in the <code>SecretBinary</code>
parameter, but not both. If you include <code>SecretString</code> or <code>SecretBinary</code>
then Secrets Manager also creates an initial secret version and
automatically attaches the staging label <code>AWSCURRENT</code> to the new
version.</p><ul>
<li><p>If you call an operation to encrypt or decrypt the <code>SecretString</code> or
<code>SecretBinary</code> for a secret in the same account as the calling user
and that secret doesn't specify a AWS KMS encryption key, Secrets
Manager uses the account's default AWS managed customer master key
(CMK) with the alias <code>aws/secretsmanager</code>. If this key doesn't
already exist in your account then Secrets Manager creates it for
you automatically. All users and roles in the same AWS account
automatically have access to use the default CMK. Note that if an
Secrets Manager API call results in AWS creating the account's
AWS-managed CMK, it can result in a one-time significant delay in
returning the result.</p></li>
<li><p>If the secret resides in a different AWS account from the
credentials calling an API that requires encryption or decryption of
the secret value then you must create and use a custom AWS KMS CMK
because you can't access the default CMK for the account using
credentials from a different AWS account. Store the ARN of the CMK
in the secret when you create the secret or when you update it by
including it in the <code>KMSKeyId</code>. If you call an API that must encrypt
or decrypt <code>SecretString</code> or <code>SecretBinary</code> using credentials from a
different account then the AWS KMS key policy must grant
cross-account access to that other account's user or role for both
the kms:GenerateDataKey and kms:Decrypt operations.</p></li>
</ul>

<p><strong>Minimum permissions</strong></p>
<p>To run this command, you must have the following permissions:</p><ul>
<li><p>secretsmanager:CreateSecret</p></li>
<li><p>kms:GenerateDataKey - needed only if you use a customer-managed AWS
KMS key to encrypt the secret. You do not need this permission to
use the account default AWS managed CMK for Secrets Manager.</p></li>
<li><p>kms:Decrypt - needed only if you use a customer-managed AWS KMS key
to encrypt the secret. You do not need this permission to use the
account default AWS managed CMK for Secrets Manager.</p></li>
<li><p>secretsmanager:TagResource - needed only if you include the <code>Tags</code>
parameter.</p></li>
</ul>

<p><strong>Related operations</strong></p><ul>
<li><p>To delete a secret, use DeleteSecret.</p></li>
<li><p>To modify an existing secret, use UpdateSecret.</p></li>
<li><p>To create a new version of a secret, use PutSecretValue.</p></li>
<li><p>To retrieve the encrypted secure string and secure binary values,
use GetSecretValue.</p></li>
<li><p>To retrieve all other details for a secret, use DescribeSecret. This
does not include the encrypted secure string and secure binary
values.</p></li>
<li><p>To retrieve the list of secret versions associated with the current
secret, use DescribeSecret and examine the <code>SecretVersionsToStages</code>
response value.</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>secretsmanager_create_secret</span><span class='op'>(</span><span class='va'>Name</span>, <span class='va'>ClientRequestToken</span>, <span class='va'>Description</span>,
  <span class='va'>KmsKeyId</span>, <span class='va'>SecretBinary</span>, <span class='va'>SecretString</span>, <span class='va'>Tags</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Name</th>
      <td><p>[required] Specifies the friendly name of the new secret.</p>
<p>The secret name must be ASCII letters, digits, or the following
characters : /\_+=.@-</p>
<p>Do not end your secret name with a hyphen followed by six characters. If
you do so, you risk confusion and unexpected results when searching for
a secret by partial ARN. Secrets Manager automatically adds a hyphen and
six random characters at the end of the ARN.</p></td>
    </tr>
    <tr>
      <th>ClientRequestToken</th>
      <td><p>(Optional) If you include <code>SecretString</code> or <code>SecretBinary</code>, then an
initial version is created as part of the secret, and this parameter
specifies a unique identifier for the new version.</p>
<p>If you use the AWS CLI or one of the AWS SDK to call this operation,
then you can leave this parameter empty. The CLI or SDK generates a
random UUID for you and includes it as the value for this parameter in
the request. If you don't use the SDK and instead generate a raw HTTP
request to the Secrets Manager service endpoint, then you must generate
a <code>ClientRequestToken</code> yourself for the new version and include the
value in the request.</p>
<p>This value helps ensure idempotency. Secrets Manager uses this value to
prevent the accidental creation of duplicate versions if there are
failures and retries during a rotation. We recommend that you generate a
<a href='https://en.wikipedia.org/wiki/Universally_unique_identifier'>UUID-type</a>
value to ensure uniqueness of your versions within the specified secret.</p><ul>
<li><p>If the <code>ClientRequestToken</code> value isn't already associated with a
version of the secret then a new version of the secret is created.</p></li>
<li><p>If a version with this value already exists and the version
<code>SecretString</code> and <code>SecretBinary</code> values are the same as those in
the request, then the request is ignored.</p></li>
<li><p>If a version with this value already exists and that version's
<code>SecretString</code> and <code>SecretBinary</code> values are different from those in
the request then the request fails because you cannot modify an
existing version. Instead, use PutSecretValue to create a new
version.</p></li>
</ul>

<p>This value becomes the <code>VersionId</code> of the new version.</p></td>
    </tr>
    <tr>
      <th>Description</th>
      <td><p>(Optional) Specifies a user-provided description of the secret.</p></td>
    </tr>
    <tr>
      <th>KmsKeyId</th>
      <td><p>(Optional) Specifies the ARN, Key ID, or alias of the AWS KMS customer
master key (CMK) to be used to encrypt the <code>SecretString</code> or
<code>SecretBinary</code> values in the versions stored in this secret.</p>
<p>You can specify any of the supported ways to identify a AWS KMS key ID.
If you need to reference a CMK in a different account, you can use only
the key ARN or the alias ARN.</p>
<p>If you don't specify this value, then Secrets Manager defaults to using
the AWS account's default CMK (the one named <code>aws/secretsmanager</code>). If a
AWS KMS CMK with that name doesn't yet exist, then Secrets Manager
creates it for you automatically the first time it needs to encrypt a
version's <code>SecretString</code> or <code>SecretBinary</code> fields.</p>
<p>You can use the account default CMK to encrypt and decrypt only if you
call this operation using credentials from the same account that owns
the secret. If the secret resides in a different account, then you must
create a custom CMK and specify the ARN in this field.</p></td>
    </tr>
    <tr>
      <th>SecretBinary</th>
      <td><p>(Optional) Specifies binary data that you want to encrypt and store in
the new version of the secret. To use this parameter in the command-line
tools, we recommend that you store your binary data in a file and then
use the appropriate technique for your tool to pass the contents of the
file as a parameter.</p>
<p>Either <code>SecretString</code> or <code>SecretBinary</code> must have a value, but not both.
They cannot both be empty.</p>
<p>This parameter is not available using the Secrets Manager console. It
can be accessed only by using the AWS CLI or one of the AWS SDKs.</p></td>
    </tr>
    <tr>
      <th>SecretString</th>
      <td><p>(Optional) Specifies text data that you want to encrypt and store in
this new version of the secret.</p>
<p>Either <code>SecretString</code> or <code>SecretBinary</code> must have a value, but not both.
They cannot both be empty.</p>
<p>If you create a secret by using the Secrets Manager console then Secrets
Manager puts the protected secret text in only the <code>SecretString</code>
parameter. The Secrets Manager console stores the information as a JSON
structure of key/value pairs that the Lambda rotation function knows how
to parse.</p>
<p>For storing multiple values, we recommend that you use a JSON text
string argument and specify key/value pairs. For information on how to
format a JSON parameter for the various command line tool environments,
see <a href='https://docs.aws.amazon.com/cli/latest/userguide/cli-usage-parameters.html#cli-using-param-json'>Using JSON for Parameters</a>
in the <em>AWS CLI User Guide</em>. For example:</p>
<p><code>\{"username":"bob","password":"abc123xyz456"\}</code></p>
<p>If your command-line tool or SDK requires quotation marks around the
parameter, you should use single quotes to avoid confusion with the
double quotes required in the JSON text.</p></td>
    </tr>
    <tr>
      <th>Tags</th>
      <td><p>(Optional) Specifies a list of user-defined tags that are attached to
the secret. Each tag is a "Key" and "Value" pair of strings. This
operation only appends tags to the existing list of tags. To remove
tags, you must use UntagResource.</p><ul>
<li><p>Secrets Manager tag key names are case sensitive. A tag with the key
"ABC" is a different tag from one with key "abc".</p></li>
<li><p>If you check tags in IAM policy <code>Condition</code> elements as part of your
security strategy, then adding or removing a tag can change
permissions. If the successful completion of this operation would
result in you losing your permissions for this secret, then this
operation is blocked and returns an <code>Access Denied</code> error.</p></li>
</ul>

<p>This parameter requires a JSON text string argument. For information on
how to format a JSON parameter for the various command line tool
environments, see <a href='https://docs.aws.amazon.com/cli/latest/userguide/cli-usage-parameters.html#cli-using-param-json'>Using JSON for Parameters</a>
in the <em>AWS CLI User Guide</em>. For example:</p>
<p><code>\\[\{"Key":"CostCenter","Value":"12345"\},\{"Key":"environment","Value":"production"\}\\]</code></p>
<p>If your command-line tool or SDK requires quotation marks around the
parameter, you should use single quotes to avoid confusion with the
double quotes required in the JSON text.</p>
<p>The following basic restrictions apply to tags:</p><ul>
<li><p>Maximum number of tags per secret—50</p></li>
<li><p>Maximum key length—127 Unicode characters in UTF-8</p></li>
<li><p>Maximum value length—255 Unicode characters in UTF-8</p></li>
<li><p>Tag keys and values are case sensitive.</p></li>
<li><p>Do not use the <code>aws:</code> prefix in your tag names or values because AWS
reserves it for AWS use. You can't edit or delete tag names or
values with this prefix. Tags with this prefix do not count against
your tags per secret limit.</p></li>
<li><p>If you use your tagging schema across multiple services and
resources, remember other services might have restrictions on
allowed characters. Generally allowed characters: letters, spaces,
and numbers representable in UTF-8, plus the following special
characters: + - = . \_ : / @.</p></li>
</ul></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="request-syntax"><a class="anchor" href="#request-syntax"></a>Request syntax</h2>

    
<pre><span class='va'>svc</span><span class='op'>$</span><span class='fu'>create_secret</span><span class='op'>(</span>
  Name <span class='op'>=</span> <span class='st'>"string"</span>,
  ClientRequestToken <span class='op'>=</span> <span class='st'>"string"</span>,
  Description <span class='op'>=</span> <span class='st'>"string"</span>,
  KmsKeyId <span class='op'>=</span> <span class='st'>"string"</span>,
  SecretBinary <span class='op'>=</span> <span class='va'>raw</span>,
  SecretString <span class='op'>=</span> <span class='st'>"string"</span>,
  Tags <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
      Key <span class='op'>=</span> <span class='st'>"string"</span>,
      Value <span class='op'>=</span> <span class='st'>"string"</span>
    <span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>)</span>
</pre>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># The following example shows how to create a secret. The credentials</span>
<span class='co'># stored in the encrypted secret value are retrieved from a file on disk</span>
<span class='co'># named mycreds.json.</span>
<span class='va'>svc</span><span class='op'>$</span><span class='fu'>create_secret</span><span class='op'>(</span>
  ClientRequestToken <span class='op'>=</span> <span class='st'>"EXAMPLE1-90ab-cdef-fedc-ba987SECRET1"</span>,
  Description <span class='op'>=</span> <span class='st'>"My test database secret created with the CLI"</span>,
  Name <span class='op'>=</span> <span class='st'>"MyTestDatabaseSecret"</span>,
  SecretString <span class='op'>=</span> <span class='st'>"{\"username\":\"david\",\"password\":\"BnQw!XDWgaEeT9XGTT29\"}"</span>
<span class='op'>)</span>
<span class='op'>}</span>

</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Kretch, Adam Banker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


