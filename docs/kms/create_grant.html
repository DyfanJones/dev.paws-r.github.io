<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Adds a grant to a customer master key (CMK) — kms_create_grant • paws</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script href="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script href="../pkgdown.js"></script>




<meta property="og:title" content="Adds a grant to a customer master key (CMK) — kms_create_grant" />
<meta property="og:description" content="Adds a grant to a customer master key (CMK). The grant allows the
grantee principal to use the CMK when the conditions specified in the
grant are met. When setting permissions, grants are an alternative to
key policies." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="..">paws</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
</li>
<li>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/paws-r/paws/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Adds a grant to a customer master key (CMK)</h1>
    <small class="dont-index">Source: <a href='https://github.com/paws-r/paws/blob/master/R/kms_operations.R'><code>R/kms_operations.R</code></a></small>
    <div class="hidden name"><code>kms_create_grant.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Adds a grant to a customer master key (CMK). The grant allows the
grantee principal to use the CMK when the conditions specified in the
grant are met. When setting permissions, grants are an alternative to
key policies.</p>
    </div>

    <pre class="usage"><span class='fu'>kms_create_grant</span>(<span class='no'>KeyId</span>, <span class='no'>GranteePrincipal</span>, <span class='no'>RetiringPrincipal</span>, <span class='no'>Operations</span>,
  <span class='no'>Constraints</span>, <span class='no'>GrantTokens</span>, <span class='no'>Name</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>KeyId</th>
      <td><p>[required] The unique identifier for the customer master key (CMK) that the grant
applies to.</p>
<p>Specify the key ID or the Amazon Resource Name (ARN) of the CMK. To
specify a CMK in a different AWS account, you must use the key ARN.</p>
<p>For example:</p><ul>
<li><p>Key ID: <code>1234abcd-12ab-34cd-56ef-1234567890ab</code></p></li>
<li><p>Key ARN:
<code>arn:aws:kms:us-east-2:111122223333:key/1234abcd-12ab-34cd-56ef-1234567890ab</code></p></li>
</ul>

<p>To get the key ID and key ARN for a CMK, use ListKeys or DescribeKey.</p></td>
    </tr>
    <tr>
      <th>GranteePrincipal</th>
      <td><p>[required] The principal that is given permission to perform the operations that
the grant permits.</p>
<p>To specify the principal, use the <a href='https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html'>Amazon Resource Name (ARN)</a>
of an AWS principal. Valid AWS principals include AWS accounts (root),
IAM users, IAM roles, federated users, and assumed role users. For
examples of the ARN syntax to use for specifying a principal, see <a href='https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html#arn-syntax-iam'>AWS Identity and Access Management (IAM)</a>
in the Example ARNs section of the <em>AWS General Reference</em>.</p></td>
    </tr>
    <tr>
      <th>RetiringPrincipal</th>
      <td><p>The principal that is given permission to retire the grant by using
RetireGrant operation.</p>
<p>To specify the principal, use the <a href='https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html'>Amazon Resource Name (ARN)</a>
of an AWS principal. Valid AWS principals include AWS accounts (root),
IAM users, federated users, and assumed role users. For examples of the
ARN syntax to use for specifying a principal, see <a href='https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html#arn-syntax-iam'>AWS Identity and Access Management (IAM)</a>
in the Example ARNs section of the <em>AWS General Reference</em>.</p></td>
    </tr>
    <tr>
      <th>Operations</th>
      <td><p>[required] A list of operations that the grant permits.</p></td>
    </tr>
    <tr>
      <th>Constraints</th>
      <td><p>Allows a <a href='https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#cryptographic-operations'>cryptographic operation</a>
only when the encryption context matches or includes the encryption
context specified in this structure. For more information about
encryption context, see <a href='https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#encrypt_context'>Encryption Context</a>
in the <strong>AWS Key Management Service Developer Guide</strong> .</p></td>
    </tr>
    <tr>
      <th>GrantTokens</th>
      <td><p>A list of grant tokens.</p>
<p>For more information, see <a href='https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#grant_token'>Grant Tokens</a>
in the <em>AWS Key Management Service Developer Guide</em>.</p></td>
    </tr>
    <tr>
      <th>Name</th>
      <td><p>A friendly name for identifying the grant. Use this value to prevent the
unintended creation of duplicate grants when retrying this request.</p>
<p>When this value is absent, all <code>CreateGrant</code> requests result in a new
grant with a unique <code>GrantId</code> even if all the supplied parameters are
identical. This can result in unintended duplicates when you retry the
<code>CreateGrant</code> request.</p>
<p>When this value is present, you can retry a <code>CreateGrant</code> request with
identical parameters; if the grant already exists, the original
<code>GrantId</code> is returned without creating a new grant. Note that the
returned grant token is unique with every <code>CreateGrant</code> request, even
when a duplicate <code>GrantId</code> is returned. All grant tokens obtained in
this way can be used interchangeably.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>To create a grant that allows a <a href='https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#cryptographic-operations'>cryptographic operation</a>
only when the request includes a particular <a href='https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#encrypt_context'>encryption context</a>,
use the <code>Constraints</code> parameter. For details, see GrantConstraints.</p>
<p>You can create grants on symmetric and asymmetric CMKs. However, if the
grant allows an operation that the CMK does not support, <code>CreateGrant</code>
fails with a <code>ValidationException</code>.</p><ul>
<li><p>Grants for symmetric CMKs cannot allow operations that are not
supported for symmetric CMKs, including Sign, Verify, and
GetPublicKey. (There are limited exceptions to this rule for legacy
operations, but you should not create a grant for an operation that
AWS KMS does not support.)</p></li>
<li><p>Grants for asymmetric CMKs cannot allow operations that are not
supported for asymmetric CMKs, including operations that <a href='https://docs.aws.amazon.com/kms/latest/APIReference/API_GenerateDataKey'>generate data keys</a>
or <a href='https://docs.aws.amazon.com/kms/latest/APIReference/API_GenerateDataKeyPair'>data key pairs</a>,
or operations related to <a href='https://docs.aws.amazon.com/kms/latest/developerguide/rotate-keys.html'>automatic key rotation</a>,
<a href='https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html'>imported key material</a>,
or CMKs in <a href='https://docs.aws.amazon.com/kms/latest/developerguide/custom-key-store-overview.html'>custom key stores</a>.</p></li>
<li><p>Grants for asymmetric CMKs with a <code>KeyUsage</code> of <code>ENCRYPT_DECRYPT</code>
cannot allow the Sign or Verify operations. Grants for asymmetric
CMKs with a <code>KeyUsage</code> of <code>SIGN_VERIFY</code> cannot allow the Encrypt or
Decrypt operations.</p></li>
<li><p>Grants for asymmetric CMKs cannot include an encryption context
grant constraint. An encryption context is not supported on
asymmetric CMKs.</p></li>
</ul>

<p>For information about symmetric and asymmetric CMKs, see <a href='https://docs.aws.amazon.com/kms/latest/developerguide/symmetric-asymmetric.html'>Using Symmetric and Asymmetric CMKs</a>
in the <em>AWS Key Management Service Developer Guide</em>.</p>
<p>To perform this operation on a CMK in a different AWS account, specify
the key ARN in the value of the <code>KeyId</code> parameter. For more information
about grants, see
<a href='https://docs.aws.amazon.com/kms/latest/developerguide/grants.html'>Grants</a>
in the <strong>AWS Key Management Service Developer Guide</strong> .</p>
<p>The CMK that you use for this operation must be in a compatible key
state. For details, see <a href='https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html'>How Key State Affects Use of a Customer Master Key</a>
in the <em>AWS Key Management Service Developer Guide</em>.</p>
    <h2 class="hasAnchor" id="request-syntax"><a class="anchor" href="#request-syntax"></a>Request syntax</h2>

    
<pre><span class='no'>svc</span>$<span class='fu'>create_grant</span>(
  <span class='kw'>KeyId</span> <span class='kw'>=</span> <span class='st'>"string"</span>,
  <span class='kw'>GranteePrincipal</span> <span class='kw'>=</span> <span class='st'>"string"</span>,
  <span class='kw'>RetiringPrincipal</span> <span class='kw'>=</span> <span class='st'>"string"</span>,
  <span class='kw'>Operations</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='st'>"Decrypt"</span><span class='kw'>|</span><span class='st'>"Encrypt"</span><span class='kw'>|</span><span class='st'>"GenerateDataKey"</span><span class='kw'>|</span><span class='st'>"GenerateDataKeyWithoutPlaintext"</span><span class='kw'>|</span><span class='st'>"ReEncryptFrom"</span><span class='kw'>|</span><span class='st'>"ReEncryptTo"</span><span class='kw'>|</span><span class='st'>"Sign"</span><span class='kw'>|</span><span class='st'>"Verify"</span><span class='kw'>|</span><span class='st'>"GetPublicKey"</span><span class='kw'>|</span><span class='st'>"CreateGrant"</span><span class='kw'>|</span><span class='st'>"RetireGrant"</span><span class='kw'>|</span><span class='st'>"DescribeKey"</span><span class='kw'>|</span><span class='st'>"GenerateDataKeyPair"</span><span class='kw'>|</span><span class='st'>"GenerateDataKeyPairWithoutPlaintext"</span>
  ),
  <span class='kw'>Constraints</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='kw'>EncryptionContextSubset</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
      <span class='st'>"string"</span>
    ),
    <span class='kw'>EncryptionContextEquals</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
      <span class='st'>"string"</span>
    )
  ),
  <span class='kw'>GrantTokens</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='st'>"string"</span>
  ),
  <span class='kw'>Name</span> <span class='kw'>=</span> <span class='st'>"string"</span>
)</pre>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># The following example creates a grant that allows the specified IAM role</span>
<span class='co'># to encrypt data with the specified customer master key (CMK).</span>
<span class='no'>svc</span>$<span class='fu'>create_grant</span>(
  <span class='kw'>GranteePrincipal</span> <span class='kw'>=</span> <span class='st'>"arn:aws:iam::111122223333:role/ExampleRole"</span>,
  <span class='kw'>KeyId</span> <span class='kw'>=</span> <span class='st'>"arn:aws:kms:us-east-2:444455556666:key/1234abcd-12ab-34cd-56ef-1234567890ab"</span>,
  <span class='kw'>Operations</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='st'>"Encrypt"</span>,
    <span class='st'>"Decrypt"</span>
  )
)
}</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Kretch, Adam Banker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


