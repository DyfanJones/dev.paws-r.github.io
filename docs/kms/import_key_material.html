<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Imports key material into an existing symmetric AWS KMS customer master
key (CMK) that was created without key material — kms_import_key_material • paws</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script href="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script href="../pkgdown.js"></script>




<meta property="og:title" content="Imports key material into an existing symmetric AWS KMS customer master
key (CMK) that was created without key material — kms_import_key_material" />
<meta property="og:description" content="Imports key material into an existing symmetric AWS KMS customer master
key (CMK) that was created without key material. After you successfully
import key material into a CMK, you can reimport the same key material
into that CMK, but you cannot import different key material.
You cannot perform this operation on an asymmetric CMK or on any CMK in
a different AWS account. For more information about creating CMKs with
no key material and then importing key material, see Importing Key Material
in the AWS Key Management Service Developer Guide.
Before using this operation, call GetParametersForImport. Its response
includes a public key and an import token. Use the public key to encrypt
the key material. Then, submit the import token from the same
GetParametersForImport response.
When calling this operation, you must specify the following values:
The key ID or key ARN of a CMK with no key material. Its Origin
must be EXTERNAL.
To create a CMK with no key material, call CreateKey and set the
value of its Origin parameter to EXTERNAL. To get the Origin
of a CMK, call DescribeKey.)
The encrypted key material. To get the public key to encrypt the key
material, call GetParametersForImport.
The import token that GetParametersForImport returned. You must use
a public key and token from the same GetParametersForImport
response.
Whether the key material expires and if so, when. If you set an
expiration date, AWS KMS deletes the key material from the CMK on
the specified date, and the CMK becomes unusable. To use the CMK
again, you must reimport the same key material. The only way to
change an expiration date is by reimporting the same key material
and specifying a new expiration date.


When this operation is successful, the key state of the CMK changes from
PendingImport to Enabled, and you can use the CMK.
If this operation fails, use the exception to help determine the
problem. If the error is related to the key material, the import token,
or wrapping key, use GetParametersForImport to get a new public key and
import token for the CMK and repeat the import procedure. For help, see
How To Import Key Material
in the AWS Key Management Service Developer Guide.
The CMK that you use for this operation must be in a compatible key
state. For details, see How Key State Affects Use of a Customer Master Key
in the AWS Key Management Service Developer Guide.
Cross-account use: No. You cannot perform this operation on a CMK in
a different AWS account.
Required permissions:
kms:ImportKeyMaterial
(key policy)
Related operations:
DeleteImportedKeyMaterial
GetParametersForImport

" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="..">paws</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
</li>
<li>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/paws-r/paws/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Imports key material into an existing symmetric AWS KMS customer master
key (CMK) that was created without key material</h1>
    <small class="dont-index">Source: <a href='https://github.com/paws-r/paws/blob/master/R/kms_operations.R'><code>R/kms_operations.R</code></a></small>
    <div class="hidden name"><code>kms_import_key_material.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Imports key material into an existing symmetric AWS KMS customer master
key (CMK) that was created without key material. After you successfully
import key material into a CMK, you can <a href='https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html#reimport-key-material'>reimport the same key material</a>
into that CMK, but you cannot import different key material.</p>
<p>You cannot perform this operation on an asymmetric CMK or on any CMK in
a different AWS account. For more information about creating CMKs with
no key material and then importing key material, see <a href='https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html'>Importing Key Material</a>
in the <em>AWS Key Management Service Developer Guide</em>.</p>
<p>Before using this operation, call GetParametersForImport. Its response
includes a public key and an import token. Use the public key to encrypt
the key material. Then, submit the import token from the same
<code>GetParametersForImport</code> response.</p>
<p>When calling this operation, you must specify the following values:</p><ul>
<li><p>The key ID or key ARN of a CMK with no key material. Its <code>Origin</code>
must be <code>EXTERNAL</code>.</p>
<p>To create a CMK with no key material, call CreateKey and set the
value of its <code>Origin</code> parameter to <code>EXTERNAL</code>. To get the <code>Origin</code>
of a CMK, call DescribeKey.)</p></li>
<li><p>The encrypted key material. To get the public key to encrypt the key
material, call GetParametersForImport.</p></li>
<li><p>The import token that GetParametersForImport returned. You must use
a public key and token from the same <code>GetParametersForImport</code>
response.</p></li>
<li><p>Whether the key material expires and if so, when. If you set an
expiration date, AWS KMS deletes the key material from the CMK on
the specified date, and the CMK becomes unusable. To use the CMK
again, you must reimport the same key material. The only way to
change an expiration date is by reimporting the same key material
and specifying a new expiration date.</p></li>
</ul>

<p>When this operation is successful, the key state of the CMK changes from
<code>PendingImport</code> to <code>Enabled</code>, and you can use the CMK.</p>
<p>If this operation fails, use the exception to help determine the
problem. If the error is related to the key material, the import token,
or wrapping key, use GetParametersForImport to get a new public key and
import token for the CMK and repeat the import procedure. For help, see
<a href='https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html#importing-keys-overview'>How To Import Key Material</a>
in the <em>AWS Key Management Service Developer Guide</em>.</p>
<p>The CMK that you use for this operation must be in a compatible key
state. For details, see <a href='https://docs.aws.amazon.com/kms/latest/developerguide/key-state.html'>How Key State Affects Use of a Customer Master Key</a>
in the <em>AWS Key Management Service Developer Guide</em>.</p>
<p><strong>Cross-account use</strong>: No. You cannot perform this operation on a CMK in
a different AWS account.</p>
<p><strong>Required permissions</strong>:
<a href='https://docs.aws.amazon.com/kms/latest/developerguide/kms-api-permissions-reference.html'>kms:ImportKeyMaterial</a>
(key policy)</p>
<p><strong>Related operations:</strong></p><ul>
<li><p>DeleteImportedKeyMaterial</p></li>
<li><p>GetParametersForImport</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>kms_import_key_material</span><span class='op'>(</span><span class='va'>KeyId</span>, <span class='va'>ImportToken</span>, <span class='va'>EncryptedKeyMaterial</span>,
  <span class='va'>ValidTo</span>, <span class='va'>ExpirationModel</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>KeyId</th>
      <td><p>[required] The identifier of the symmetric CMK that receives the imported key
material. The CMK's <code>Origin</code> must be <code>EXTERNAL</code>. This must be the same
CMK specified in the <code>KeyID</code> parameter of the corresponding
GetParametersForImport request.</p>
<p>Specify the key ID or the Amazon Resource Name (ARN) of the CMK.</p>
<p>For example:</p><ul>
<li><p>Key ID: <code>1234abcd-12ab-34cd-56ef-1234567890ab</code></p></li>
<li><p>Key ARN:
<code>arn:aws:kms:us-east-2:111122223333:key/1234abcd-12ab-34cd-56ef-1234567890ab</code></p></li>
</ul>

<p>To get the key ID and key ARN for a CMK, use ListKeys or DescribeKey.</p></td>
    </tr>
    <tr>
      <th>ImportToken</th>
      <td><p>[required] The import token that you received in the response to a previous
GetParametersForImport request. It must be from the same response that
contained the public key that you used to encrypt the key material.</p></td>
    </tr>
    <tr>
      <th>EncryptedKeyMaterial</th>
      <td><p>[required] The encrypted key material to import. The key material must be encrypted
with the public wrapping key that GetParametersForImport returned, using
the wrapping algorithm that you specified in the same
<code>GetParametersForImport</code> request.</p></td>
    </tr>
    <tr>
      <th>ValidTo</th>
      <td><p>The time at which the imported key material expires. When the key
material expires, AWS KMS deletes the key material and the CMK becomes
unusable. You must omit this parameter when the <code>ExpirationModel</code>
parameter is set to <code>KEY_MATERIAL_DOES_NOT_EXPIRE</code>. Otherwise it is
required.</p></td>
    </tr>
    <tr>
      <th>ExpirationModel</th>
      <td><p>Specifies whether the key material expires. The default is
<code>KEY_MATERIAL_EXPIRES</code>, in which case you must include the <code>ValidTo</code>
parameter. When this parameter is set to <code>KEY_MATERIAL_DOES_NOT_EXPIRE</code>,
you must omit the <code>ValidTo</code> parameter.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="request-syntax"><a class="anchor" href="#request-syntax"></a>Request syntax</h2>

    
<pre><span class='va'>svc</span><span class='op'>$</span><span class='fu'>import_key_material</span><span class='op'>(</span>
  KeyId <span class='op'>=</span> <span class='st'>"string"</span>,
  ImportToken <span class='op'>=</span> <span class='va'>raw</span>,
  EncryptedKeyMaterial <span class='op'>=</span> <span class='va'>raw</span>,
  ValidTo <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct</a></span><span class='op'>(</span>
    <span class='st'>"2015-01-01"</span>
  <span class='op'>)</span>,
  ExpirationModel <span class='op'>=</span> <span class='st'>"KEY_MATERIAL_EXPIRES"</span><span class='op'>|</span><span class='st'>"KEY_MATERIAL_DOES_NOT_EXPIRE"</span>
<span class='op'>)</span>
</pre>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># The following example imports key material into the specified CMK.</span>
<span class='va'>svc</span><span class='op'>$</span><span class='fu'>import_key_material</span><span class='op'>(</span>
  EncryptedKeyMaterial <span class='op'>=</span> <span class='st'>"&lt;binary data&gt;"</span>,
  ExpirationModel <span class='op'>=</span> <span class='st'>"KEY_MATERIAL_DOES_NOT_EXPIRE"</span>,
  ImportToken <span class='op'>=</span> <span class='st'>"&lt;binary data&gt;"</span>,
  KeyId <span class='op'>=</span> <span class='st'>"1234abcd-12ab-34cd-56ef-1234567890ab"</span>
<span class='op'>)</span>
<span class='op'>}</span>

</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Kretch, Adam Banker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


